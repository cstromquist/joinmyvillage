"use strict";var Config={uuid:function(d,c){for(c=d="";d++<36;c+=d*51&52?(d^15?8^Math.random()*(d^20?16:4):4).toString(16):"-"){}return c},root_url:document.domain,subdirectory:"/",sub_url:"?chapter=",getUrl:function(){return this.root_url+this.subdirectory}};var Story={chapters:7,chapter_open_status:{1:false,2:false,3:false,4:false,5:false,6:false,7:false},chapter_close_status:{1:false,2:false,3:false,4:false,5:false,6:false,7:false},current_chapter:null,next_chapter:null,previous_chapter:null,init:function(){this.setChapter(this.getChapter());this.openStory()},openStory:function(a){if(!$.cookie("current_chapter")||a==true){Scroll.preventScrolling();var b=$("#modal-entry");b.fadeIn("slow");b.modal({position:["15%",],onClose:function(c){c.data.animate({left:"-=2000px"},2000,function(){c.overlay.slideUp(1200,function(){Scroll.enableScrolling();$.modal.close()})});Story.begin()}})}else{Story.begin()}},begin:function(){if(this.current_chapter!=this.chapters){LikesModal.init(this.current_chapter)}Likes.init(function(){if(Story.validateChapter()){Story.bindFixedElements();Story.openChapter()}else{Story.setChapter(Story.previous_chapter);Story.begin()}})},end:function(){var a=$("#modal-end");a.fadeIn("slow");a.modal()},bindFixedElements:function(){var a=0;$(window).bind("scroll",function(){$("#header .social-media").css("top",35-$(window).scrollTop()+"px");$("#header .jmv-logo").css("top",20-$(window).scrollTop()+"px")})},getChapter:function(){var b=decodeURI((RegExp(name+"=(.+?)(&|$)").exec(location.search)||[,null])[1]);var a=null;if(b!="null"&&!isNaN(Number(b))){a=Number(b)}else{if(a=$.cookie("current_chapter")){if(isNaN(a)){a=1}else{a=Number(a)}}else{a=1}}if(a>Story.chapters){a=1}return a},setChapter:function(a){this.current_chapter=a;this.next_chapter=a+1;this.previous_chapter=a==1?1:a-1},getChapterWidth:function(a){var b=Number($("#chapter-"+a).width());return b},getUrl:function(b){b=b?Number(b):Story.current_chapter;var a=Config.getUrl();if(b>1){a+=Config.sub_url+b}return a},chapterStartPoint:function(a){var c=0;for(var b=1;b<a;b++){c+=this.getChapterWidth(b)}return c},openNextChapter:function(){if(this.current_chapter<Story.chapters){Story[this.current_chapter].status=false;this.current_chapter=this.current_chapter+1;Story.begin()}},redirectToNextChapter:function(){var a=this.current_chapter+1;window.location.href="http://"+Config.root_url+Config.subdirectory+Config.sub_url+a},validateChapter:function(){if(Story.current_chapter!=1&&!Likes[Story.previous_chapter].limit_reached){return false}return true},openChapter:function(){if(!this.chapter_open_status[this.current_chapter]){this.chapter_open_status[this.current_chapter]=true}$.cookie("current_chapter",this.current_chapter,{expires:7});this.setWidth(this.current_chapter);for(var a=1;a<=Story.current_chapter;a++){$("#chapter-"+a).delay(300).fadeIn(1000)}this.scrollToChapter()},closeChapter:function(a){this.chapter_close_status[a]=true},setWidth:function(a){var c=0;for(var b=1;b<=a;b++){c+=this.getChapterWidth(b)}this.width=c;$("#footer").css("width",this.width+"px");$("#container").css("width",this.width+"px");$("#story").css("width",this.width+"px")},scrollToChapter:function(){$("html, body").stop().animate({scrollLeft:Story.chapterStartPoint(Story.current_chapter)},3000,function(){Story[Story.current_chapter].status=true;Story[Story.current_chapter].open();Boxes.init();Flags.init()})},preload:function(){$("#loading-container").show();$("#container").hide();$("#loading-container").delay(1000).fadeOut(800);$("#container").delay(1000).fadeIn(1600)},animateObject:function(b,a,c){$(b).delay(a).animate({opacity:1,bottom:"0px"},c)},1:{status:false,open:function(){this.animate();this.bindScrollPoints();Maya.enter("child");Boxes.show(1,1);$("#flag-11").click(function(){$("#learn-more").hide()})},animate:function(){$("#cloud-11").animate({left:"+=-600px",opacity:0},27000).animate({left:"+=600px"},0).animate({opacity:0.8},3000);this.blinkKeyboard();this.blinkLearnMore()},blinkKeyboard:function(){if(!$("#instructions").attr("disabled")){$("#instructions").removeClass("instructions").addClass("keyboard").animate({opacity:1},1500).animate({opacity:0},1500,function(){$(this).removeClass("keyboard").addClass("instructions")}).animate({opacity:0.4},1500).animate({opacity:0},1500,Story[1].blinkKeyboard)}},blinkLearnMore:function(){$("#learn-more").animate({opacity:1},1500).animate({opacity:0},1500,Story[1].blinkLearnMore)},bindScrollPoints:function(){$(window).bind("scroll",function(){if(Maya.xPosition()>400){$("#instructions").hide();$("#instructions").attr("disabled",true)}if(Maya.xPosition()>2000&&Maya.xPosition()<3000){Animations.animateCrops(1)}if(Maya.xPosition()>2400&&Maya.xPosition()<3000){Animations.animateCrops(1)}if(Maya.xPosition()>2800&&Maya.xPosition()<3300){$("#girl-11").animate({bottom:"110px"},3500)}if(Maya.xPosition()>3800&&Maya.xPosition()<4000){$("#boy-11").animate({bottom:"110px"},4500);$("#boy-12").animate({bottom:"120px"},4000)}})},close:function(){}},2:{status:false,open:function(){Maya.enter("child");this.bindScrollPoints();Animations.water_position=$("#chapter-2 #water-front-21").position().left;Animations.chapter=2;Animations.animateWater();this.animateParachutes()},animateParachutes:function(){if(Story.current_chapter==2){$("#chapter-2 #parachute-21").animate({top:"200px"},2500,"linear").animate({top:"120px"},2500,"linear",Story[2].animateParachutes);$("#chapter-2 #parachute-22").animate({left:"-=50px"},3500,"linear").animate({left:"+=50px"},3500,"linear");$("#chapter-2 #parachute-23").animate({top:"+=50px"},4500,"linear").animate({top:"-=50px"},4500,"linear")}},bindScrollPoints:function(){$(window).bind("scroll",function(){var a=$("#chapter-2 #bubble-21");if(Maya.xPosition()>Story.chapterStartPoint(2)+4400&&a.css("opacity")==0){a.animate({opacity:1},1000)}})},close:function(){}},3:{status:false,plane_flown:false,open:function(){Maya.enter("child");this.animate();this.bindScrollPoints()},animate:function(){this.animateParachutes()},animateParachutes:function(){if(Story.current_chapter==3){$("#chapter-3 #parachute-31").animate({top:"+=200px"},5500,"linear").animate({top:"-=200px"},5500,"linear",Story[3].animateParachutes)}},bindScrollPoints:function(){$(window).bind("scroll",function(){if(Maya.xPosition()>Story.chapterStartPoint(3)+1450&&Maya.current_life_stage=="child"){Maya.lifeTransition("teen")}if(Maya.xPosition()>$("#chapter-3 #bubble-31").position().left-200&&!$("#chapter-3 #bubble-31").attr("disabled")){$("#chapter-3 #bubble-1").animate({opacity:1},1000)}if(Maya.xPosition()>$("#chapter-3 #bubble-32").position().left-200&&!$("#chapter-3 #bubble-32").attr("disabled")){$("#chapter-3 #bubble-2").animate({opacity:1},1000)}if(Maya.xPosition()>$("#chapter-3 #bubble-31").position().left+50&&!$("#chapter-3 #bubble-31").attr("disabled")){$("#chapter-3 #bubble-1").removeClass("bubble-marriage").addClass("bubble-burst").attr("disabled",true).fadeOut(2000)}if(Maya.xPosition()>$("#chapter-3 #bubble-32").position().left+50&&!$("#chapter-3 #bubble-32").attr("disabled")){$("#chapter-3 #bubble-2").removeClass("bubble-baby").addClass("bubble-burst-right").attr("disabled",true).fadeOut(2000)}if(Maya.xPosition()>Story.chapterStartPoint(3)+2300&&Story[3].plane_flown!=true){$("#plane-31").animate({left:"+=600px"},2000);Story[3].plane_flown=true;Animations.animatePlane()}if(Maya.xPosition()>$("#chapter-3 #tree-34").position().left-600&&!$("#chapter-3 #tree-34 img").attr("disabled")){$("#chapter-3 #tree-34 img").css("display","block").attr("src","img/animations/moneytree.gif").attr("disabled",true);$("#chapter-3 #tree-34").removeClass("tree-money-start").css("height",451)}})},close:function(){}},4:{status:false,open:function(){Maya.enter("teen");this.animate();this.bindScrollPoints()},animate:function(){},bindScrollPoints:function(){$(window).bind("scroll",function(){if(Maya.xPosition()>Story.chapterStartPoint(5)-1500&&Maya.xPosition()<Story.chapterStartPoint(5)-1200){Animations.animateCrops(4)}if(Maya.xPosition()>Story.chapterStartPoint(4)+2400&&Maya.current_life_stage=="teen"){Maya.lifeTransition("woman")}})},close:function(){}},5:{status:false,man_chosen:false,open:function(){Maya.enter("woman");this.animate();this.bindScrollPoints()},animate:function(){var a=$("#girl-51 #stars-51");a.css({bottom:"50px"});a.animate({opacity:1},2000).animate({opacity:0},2000);var a=$("#girl-52 #stars-52");a.css({bottom:"50px"});a.animate({opacity:1},2000).animate({opacity:0},2000)},bindScrollPoints:function(){$(window).bind("scroll",function(){if(Maya.xPosition()>Story.chapterStartPoint(5)+1200&&Maya.xPosition()<Story.chapterStartPoint(5)+2000){Animations.animateCrops(5)}if(Maya.xPosition()>Story.chapterStartPoint(5)+1900&&Maya.current_life_stage=="woman"){Maya.lifeTransition("pregnant")}if(Maya.xPosition()>Story.chapterStartPoint(5)+1300&&Story[5].man_chosen!=true){var a=$("#chapter-5 #man-53");a.removeClass("man-3").addClass("husband-animation").animate({left:"+=650px"},4000);Story[5].man_chosen=true}})},close:function(){}},6:{status:false,open:function(){Maya.enter("mother",true);this.bindScrollPoints();this.animate()},animate:function(){Animations.water_position=$("#chapter-6 #water-front-61").position().left;Animations.chapter=6;Animations.animateWater()},bindScrollPoints:function(){$(window).bind("scroll",function(){if(Maya.xPosition()>Story.chapterStartPoint(6)+400&&Maya.xPosition()<Story.chapterStartPoint(6)+1200){Animations.animateCrops(6)}if(Maya.xPosition()>Story.chapterStartPoint(6)+200&&Maya.current_life_stage=="pregnant"){Maya.lifeTransition("mother")}})},close:function(){}},7:{status:false,end:false,open:function(){Maya.enter("woman",true);this.bindScrollPoints()},animate:function(){},bindScrollPoints:function(){$(window).bind("scroll",function(){if(Maya.xPosition()>=Story.chapterStartPoint(7)+2980&&Story[7].end==false){Maya.pause_animation=true;$("#maya").css("background-position",0);$("#maya").css("left",Maya.xPosition());$("#maya").css("position","absolute");$("#maya").removeClass("maya-woman").addClass("maya-animation").animate({left:"+=350px"},4000,function(){$(this).fadeOut()});Story[7].end=true}})},close:function(){}},};var Likes={chapter:null,previous_chapter:null,fbApiInit:false,use_remote:false,init:function(a){this.like_processed=false;this.chapter=Story.current_chapter;this.previous_chapter=this.chapter==1?1:this.chapter-1;this.bindFacebookLike();$.get("config.php?setting=use_fb",function(b){if(b==1){Likes.use_remote=true}else{Likes.use_remote=false}Likes.processLikeData();Likes.getCounts(Likes.previous_chapter,function(c){Likes.setCounts(Likes.previous_chapter,c,function(){if(a){a()}})})},"json")},bindFacebookLike:function(){var a=Story.getUrl();$(".facebook-like").remove();$(".facebook-like-wrapper").html('<div class="facebook-like"><fb:like send="false" href="'+a+'" layout="button_count" width="50" show_faces="false"></fb:like></div>');FB.XFBML.parse(document.getElementById("facebook-like"))},processLikeData:function(){var a=this.getCookie();Likes.getCounts(Likes.chapter,function(b){Likes.setCounts(Likes.chapter,b,function(){Likes.displayCounts();Likes.displayPercentageBar();if(a[Likes.chapter-1]){LikesModal.showThanks()}})})},recordLike:function(){$.post("likes.php",{chapter:this.chapter},function(a){Likes.setCookie();Likes.processLikeData()})},getCounts:function(b,c){if(this.use_remote==false){$.get("likes.php?chapter="+b,function(d){if(c){c(d.count)}else{return d.count}},"json")}else{var a=Story.getUrl(b);FB.api({method:"links.getStats",urls:a},function(d){if(c){c(d[0].like_count)}else{return d[0].like_count}})}},setCounts:function(a,b,c){var b=Number(b);$.get("likes.php?chapter="+a,function(e){var d=Number(e.limit);var e={count:b,limit:d,remaining:b>=d?0:(d-b),limit_reached:b>=d?true:false};Likes[a]=e;c()},"json")},displayCounts:function(){$("#likes-modal .likes-count span.count").text(this[this.chapter].count);$("#likes-modal .likes-remaining span.like-count").text(this[this.chapter].remaining);$("#likes-modal .like-count-total span.like-count").text(this[this.chapter].limit);if(Likes.count!=1){$("#likes-modal .likes-count span.plural").text("S")}else{$("#likes-modal .likes-count span.plural").text("")}if(Likes.remaining!=1){$("#likes-modal .likes-remaining span.plural").text("S")}else{$("#likes-modal .likes-remaining span.plural").text("")}},displayPercentageBar:function(){var a=(this[this.chapter].count/this[this.chapter].limit)*100;if(a>100){a=100}$("#likes-modal #percentage-bar #percentage").animate({width:a+"%"},4000)},isLimitReached:function(a){if(this[a].count>=this[a].limit){return true}else{return false}},getCookie:function(){var a=JSON.parse($.cookie("likes"));if(!a){a=Array()}return a},setCookie:function(){var a=this.getCookie();a[Likes.chapter-1]=true;$.cookie("likes",JSON.stringify(a,null,2));return a}};var LikesModal={chapter:null,content:[{intro:"Going to school is important...it is the only way Maya will ever be able to help herself, and her family.",like_message:"TO HELP MAYA GO TO SCHOOL, LIKE THIS POST",next_chapter_message:"Maya will be off to school, and Chapter Two will be revealed. Stay Tuned!",position:4732},{intro:"Female teachers are reluctant to come to rural villages...they need a safe place to live.",like_message:"TO HELP TEACHERS AND SUPPLIES GET TO MAYA'S VILLAGE, LIKE THIS POST",next_chapter_message:"Maya's school will open, and Chapter Three will be revealed. Stay tuned!",position:4213},{intro:"Most secondary schools are boarding schools. Maya needs a scholarship to cover her expenses.",like_message:"TO HELP MAYA EARN SCHOLARSHIP FUNDS, LIKE THIS POST",next_chapter_message:"Maya will get her scholarship, and Chapter Four will be revealed. Stay tuned!",position:4845},{intro:"Maya needs to talk with the younger girls in her village on the importance of an education.",like_message:"TO HELP MAYA MENTOR YOUNGER GIRLS IN THE VILLAGE, LIKE THIS POST",next_chapter_message:"all the girls will be mentored, and Chapter Five will be revealed.  Stay tuned!",position:3909},{intro:"Medical professionals are needed to help Maya understand her body's needs and show her husband how to care for her.",like_message:"TO HELP ENSURE GOOD PRENATAL CARE FOR MAYA, LIKE THIS POST",next_chapter_message:"Maya will have her baby, and Chapter Six will be revealed. Stay tuned!",position:4159},{intro:"As Maya's skill and business grow, she will earn respect and earn a chance to take a leadership position in her community.",like_message:"TO HELP MAYA BORROW MONEY FROM THE VSLA, LIKE THIS POST.",next_chapter_message:"Maya will receive a loan, and our story's ending will be revealed. Stay tuned!",position:4261},],init:function(a){this.reset();this.bindClick();this.modal=$("#likes-modal");this.chapter=a;this.show()},bindClick:function(){$("#likes-modal #thanks #congrats a#continue").click(function(){if(!$(this).attr("disabled")){$("#likes-modal").animate({opacity:0},2000,function(){Story.openNextChapter()})}$(this).attr("disabled",true)})},show:function(){$("#likes-modal").animate({opacity:1},2000);$("#likes-modal #intro").html(this.content[this.chapter-1].intro);$("#likes-modal .like-message").html(this.content[this.chapter-1].like_message);$("#likes-modal .next-chapter-message").html(this.content[this.chapter-1].next_chapter_message);$("#likes-modal .modal-banner").css("background-image","url(img/milestone_"+this.chapter+".png)");this.modal.css("left",Story.chapterStartPoint(this.chapter)+this.content[this.chapter-1].position);this.modal.animate({opacity:1},2000)},showThanks:function(a){$("#likes-modal #info").fadeOut(1000,function(){if(Likes[Story.current_chapter].limit_reached){$("#likes-modal #thanks #message").hide();$("#likes-modal #thanks #congrats").fadeIn(1000)}else{$("#likes-modal #thanks #congrats").hide();$("#likes-modal #thanks #message").fadeIn(1000)}if(a){a()}});$("#likes-modal #thanks").fadeIn(1000)},reset:function(){$("#likes-modal #info").show();$("#likes-modal #thanks").fadeOut();$("#likes-modal #thanks #message").hide();$("#likes-modal #thanks #congrats").hide();$("#likes-modal #thanks #congrats a#continue").attr("disabled",false)},hide:function(){this.modal.animate({opacity:0},2000)}};var Scroll={preventScrolling:function(){var a=[self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop];var b=$("html");b.data("scroll-position",a);b.data("previous-overflow",b.css("overflow"));b.css("overflow","hidden");window.scrollTo(a[0],a[1])},enableScrolling:function(){var b=$("html");var a=b.data("scroll-position");b.css("overflow","visible");window.scrollTo(a[0],a[1])},scroll:function(){window.scrollBy(50,0);scrollDelay=setTimeout("Story.scroll()",100)},stopScroll:function(){clearTimeout(scrollDelay)}};var Flags={x:0,content:[['Meet <a href="http://www.joinmyvillage.com" target="_blank">Join My Village</a>, a unique online initiative working through CARE to lift women and girls out of poverty in India and Malawi through education and community initiatives...to empower women and girls to strengthen themselves, their families, their communities&mdash;and the world.','Education is a birthright for all children. But only 1 out of 3 girls graduates from primary school in developing countries, leaving them stuck in a <a href="http://joinmyvillage.com/what-is-jmv" target="_blank">cycle of poverty.</a>','<a href="http://joinmyvillage.com/how-it-works" target="_blank">Our support model is a little different</a>. It involves action on your part. Each Facebook post you like and every click on our website releases $1 from General Mills and Merck to fund the important work of empowering girls through CARE.'],['In India, Join My Village supports an accelerated learning program, called <a href="http://joinmyvillage.com/project/accelerated-learning" target="_blank">Udaan</a>, targeting older girls who have not completed primary school. The program brings them up to a fifth-grade level in just 11 months&mdash;and 95% choose to continue their education.','Join My Village is working in Malawi to build <a href="http://joinmyvillage.com/project/primary-school-support" target="_blank">new teacher housing</a> that will bring more female teachers to rural villages—bringing more mentors and reducing class size.'],['In India, Join My Village supports <a href="http://joinmyvillage.com/project/kgbv-school-support" target="_blank">KGBV schools—upper primary schools for girls</a> that help them prepare for secondary school while gaining important social skills including working in groups, problem solving, critical thinking, persistence in the face of difficulty and respect for others and themselves.','Join My Village has provided more than 800 <a href="http://joinmyvillage.com/project/scholarships" target="_blank">secondary boarding school scholarships</a> in Malawi to help more girls get higher education.'],['In India, with help from Join My Village, secondary school girls have started a <a href="http://joinmyvillage.com/blog-post/a-bond-thicker-than-blood" target="_blank">leadership program called Kishori Samooh</a> to make a positive difference in their communities.','In Malawi, Join My Village has provided <a href="http://www.joinmyvillage.com/blog-post/making-the-impossible-possible" target="_blank">mentoring to over 250 girls</a> in secondary schools to encourage them to continue their education.'],['<a href="http://joinmyvillage.com/project/maternal-health" target="_blank">Maternal mortality is a global tragedy</a>. Every day nearly 1,000 expectant mothers die; 98 percent of them in poor countries.','India has the highest number of maternal deaths in the world. Join My Village supports <a href="http://joinmyvillage.com/blog-post/motherhood-is-to-be-cherished" target="_blank">maternal and newborn health programs</a> in 1,000 villages in Uttar Pradesh, helping women deliver and raise healthier families.'],['For every $1 invested in a woman, <a href="http://joinmyvillage.com/blog-post/the-power-of-being-a-vsla-member" target="_blank">she will put 80% towards her family’s health</a>, education and well-being.','Join My Village has helped to create <a href="http://joinmyvillage.com/project/vsla" target="_blank">over 50 women-owned VSLAs</a> in Malawi, lending out over $60,000 to start small businesses.']],init:function(){for(var b=1;b<=6;b++){for(var a=1;a<=this.content[b-1].length;a++){this.setupClick(b,a)}}},setupClick:function(b,a){$("#chapter-"+b+" #flag-"+b+a).click(function(){var f=$(this).parent().attr("id").substr(8,9);var d=this.id.substr(6,7);Flags.x=$(this).position().left;if(f==1&&d==2){$("#jmv-modal .modal-content img").hide();$("#jmv-modal .modal-content #video").html('<iframe width="480" height="360" src="http://www.youtube.com/embed/xc3Ijmu-wZc" frameborder="0" allowfullscreen></iframe>');$("#jmv-modal .modal-content #video").show()}else{$("#jmv-modal .modal-content #video").hide();var e=$("#jmv-modal .modal-content img");e.attr("src","img/jmv_banners/c"+f+"_f"+d+".jpg");e.show()}$("#jmv-modal .modal-content p").html(Flags.content[f-1][d-1]);$("#jmv-modal").modal({position:["20%",],closeHTML:'<a class="modal-close"></a>',closeClass:"modal-close"});var c=Number($("#jmv-modal").css("height").substr(0,3));$("#jmv-modal #border-left").css("height",c-49);$(window).bind("scroll",function(){if(Maya.xPosition()>Flags.x){$("#modal-overlay").fadeOut(500);$("#modal-container").fadeOut(500,function(){$.modal.close()})}})})},};var Boxes={init:function(){this.bindScroll()},bindScroll:function(){$(window).bind("scroll",function(){if(!Story.chapter_close_status[Story.current_chapter]&&Story[Story.current_chapter].status==true){Boxes.showBoxes(Story.current_chapter)}})},show:function(b,a){var c=$("#chapter-"+b+" #box-"+b+a);if(c.attr("enabled")){return}var d=c.css("bottom");c.css({bottom:"+=100px"});c.animate({bottom:d,opacity:1},1000);c.attr("enabled",true)},xPosition:function(a){return a.position().left},yPosition:function(a){return a.position().top},showBoxes:function(a){var c=$("#chapter-"+a+" .box").length;for(var b=1;b<=c;b++){var d=$("#chapter-"+a+" #box-"+a+b);if(Maya.xPosition()>this.xPosition(d)-450){Boxes.show(a,b)}}},showPreviousChapterBoxes:function(a){for(var b=1;b<a;b++){this.showBoxes(b)}}};var Maya={bg_points:null,pause_animation:false,current_life_stage:"child",lifeTransition:function(b){var a=$("#maya");var d=null;switch(b){case"child":var c=-5;this.bg_points=["-5px","-72px","-144px","-216px","-286px"];break;case"teen":d=8;this.bg_points=["0px","-81px","-162px","-243px","-323px"];break;case"woman":d=-8;this.bg_points=["-8px","-93px","-185px","-279px","-372px"];break;case"pregnant":d=-5;this.bg_points=["-5px","-56px","-109px"];break;case"mother":d=-8;this.bg_points=["-8px","-89px","-180px","-273px","-372px"];break;default:break}if(this.current_life_stage!=b){this.pause_animation=true;this.celebrate(d,b)}else{this.setBg(d,b)}this.current_life_stage=b},celebrate:function(c,b){var a=$("#maya #stars");$("#maya").fadeOut(300,function(){Maya.setBg(c,b);$(this).fadeIn(300);Maya.pause_animation=false})},setBg:function(b,a){$("#maya").css("background-position",b+"px");$("#maya").removeClass("maya-child").removeClass("maya-teen").removeClass("maya-woman").removeClass("maya-pregnant").removeClass("maya-mother").addClass("maya-"+a)},animate:function(){$(window).bind("scroll",function(){if(Maya.pause_animation==false){var c=$("#footer").position().top;$("#maya").css("bottom",75-$(window).scrollTop()+"px");var d=$(window).scrollLeft();var a=100;var b=Math.floor(d/a)*a;if(b/a%4==0&&Maya.bg_points.length>=4){$("#maya").css("background-position",Maya.bg_points[4])}if(((b/a)+1)%4==0){$("#maya").css("background-position",Maya.bg_points[3])}if((b/a+2)%4==0){$("#maya").css("background-position",Maya.bg_points[2])}if((b/a+3)%4==0){$("#maya").css("background-position",Maya.bg_points[1])}}})},enter:function(b,a){if(!a){this.current_life_stage=b}this.lifeTransition(b);$("#maya").fadeIn(1400,function(){Maya.animate()})},exit:function(){$("#maya").animate({left:"+500px"},2000)},xPosition:function(){return $("#maya").position().left}};var Animations={water_position:null,chapter:null,animateCrops:function(a){$("#chapter-"+a+" #crop-"+a+"1 img").animate({width:35,height:53},1000);$("#chapter-"+a+" #crop-"+a+"2 img").delay(200).animate({width:40,height:61},1000);$("#chapter-"+a+" #crop-"+a+"3 img").delay(1200).animate({width:55,height:84},1000);$("#chapter-"+a+" #crop-"+a+"4 img").delay(800).animate({width:45,height:69},1000);$("#chapter-"+a+" #crop-"+a+"5 img").delay(400).animate({width:50,height:76},1000)},animateWater:function(){var b=Animations.water_position;var a=b-30;$("#chapter-"+Animations.chapter+" #water-front-"+Animations.chapter+"1").animate({opacity:0.9,left:b+"px"},800,"linear").animate({opacity:0.92,left:a+"px"},800,"linear",Animations.animateWater);$("#chapter-"+Animations.chapter+" #water-back-"+Animations.chapter+"1").animate({opacity:0.9,left:a+"px"},800,"linear").animate({opacity:0.92,left:b+"px"},800,"linear")},animatePlane:function(){$("#plane-31").animate({bottom:"574px"},1400,"linear").animate({bottom:"514px"},1400,"linear",Animations.animatePlane)}};